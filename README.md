# Лабораторная работа №2

## Управление данными

Это программа для управления однотабличной базой данных, которая предоставляет интерфейс для добавления, удаления, редактирования и поиска записей в базе данных. Кроме того, доступно создание резервных копий БД и их загрузка, экспорт в CSV и очистка БД. 

Приложение не копирует данные из файлов БД, а работает с ними напрямую, осуществляя все операции онлайн. Записи в json-файлах перебираются линейно.

Программа использует библиотеку TinyDB для работы с JSON-файлами в качестве базы данных, а интерфейс создан с помощью библиотеки Tkinter.

Код программы: 

![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled.png)

### **Структура базы данных:**

База данных имеет единственную таблицу с полями:

- **`order_id`** (int): Идентификатор заказа.
- **`customer_id`** (int): Идентификатор клиента.
- **`amount`** (float): Сумма заказа.
- **`date`** (str): Дата заказа в формате 'YYYY-MM-DD'.
- **`status`** (str): Статус заказа.
- **`delivery_address`** (str): Адрес доставки.

### **Функционал программы:**

1. **Открытие и создание базы данных:**
    - Программа позволяет открыть существующую базу данных (выбор файла JSON) или создать новую базу данных.
2. **Табличное отображение базы данных прямо в приложении**
3. **Добавление записей:**
    - Пользователь может добавлять новые записи в базу данных, предоставляя значения для всех полей.
4. **Удаление записей:**
    - Пользователь может удалять записи по значению выбранного поля.
5. **Поиск записей:**
    - Поиск записей по значению выбранного поля.
6. **Редактирование записей:**
    - Пользователь может редактировать существующие записи, выбрав поле, значение поля для поиска и новые значения для замены.
7. **Экспорт в CSV:**
    - Экспорт данных в формат CSV.
8. **Очистка базы данных:**
    - Пользователь может очищать всю базу данных, удаляя все записи.

### **Как работают функции:**

- **Открытие и создание базы данных:**
    
    ![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%201.png)
    
    - Пользователь выбирает существующий файл JSON или создает новый.
    - Если файл существует, программа открывает базу данных.
- **Добавление записей:**
    - Пользователь вводит значения для всех полей новой записи.
    - Программа проверяет, нет ли записи с таким **`order_id`**, и добавляет новую запись в базу данных.
    - Если запись не соответстует типу данных или формату, выдается ошибка
    
    ![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%202.png)
    
- **Удаление записей:**
    - Пользователь выбирает поле из раскрывающегося списка и значение поля, по которому нужно удалить запись.
    - Программа удаляет все записи соответствующим значением в выбранном поле.
    
    ![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%203.png)
    
- **Поиск записей:**
    - Пользователь выбирает поле и вводит значение поля, по которому нужно найти записи.
    - Программа выводит результаты поиска.
    
    ![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%204.png)
    
- **Редактирование записей:**
    - Пользователь выбирает поле, вводит значение для поиска и новые значения для замены.
    - Программа находит записи с соответствующим старым значением и заменяет поля новыми значениями. При этом, некоторые значения не будут заполнены, они останутся без изменения, как в изначальной записи
    
    *Старые значения*
    

![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%205.png)

![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%206.png)

       *Новые значения:*

![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%207.png)

- **Экспорт в CSV и XLSX:**
    - Открывается окно для создания файла
    
    ![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%208.png)
    
    - Программа сохраняет данные в выбранный пользователем файл в формате CSV
    
    ![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%209.png)
    
- Создание и восстановления резервной копии:
    - Открывается окно для создания файла-копии, создается копия по адресу
    - Открывается окно выбора файла-копии, файл загружается в программу
    
    ![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%2010.png)
    
- **Очистка базы данных:**
    - Пользователь нажимает на кнопку "Очистить базу данных".
    
    ![Untitled](%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%E2%84%962%20322e0b9dd3e744afa558bfa105656f67/Untitled%2011.png)
    
    - Программа удаляет все записи из базы данных.